#+TITLE: System Document Drafts

#+TODO: TODO(t) (e) DOIN(d) PEND(p) OUTL(o) EXPL(x) FDBK(b) WAIT(w) NEXT(n) IDEA(i) | ABRT(a) PRTL(r) RVIW(v) DONE(f)
#+OPTIONS: title:nil tags:nil todo:nil ^:nil f:t num:t pri:nil toc:t
#+LATEX_HEADER: \renewcommand\maketitle{} \usepackage[scaled]{helvet} \renewcommand\familydefault{\sfdefault}
#+FILETAGS: :DOC:DRAFT:OPSYS:
#+HTML:<details>

* Document Drafts :DOC:DRAFT:OPSYS:META:
#+HTML:</details>

#+NAME:Warning Message
#+BEGIN_QUOTE
[!WARNING]
Draft items are subjected to change and refile!
#+END_QUOTE
** OUTL CPU and IRQ scheduler :PERFORMANCE:
- /Setup CPU and IRQ scheduler/ ~daemon~
** OUTL Select io scheduler :PERFORMANCE:
- /Change/ ~udev~ /rules for io-scheduler/
** OUTL Disable Coredump :TWEAKS:
/Documentation of disabling systemd coredump/
** OUTL Running Tasks in Parallel
:PROPERTIES:
:ID: 2b964774-683a-4eaa-882d-a8f5e5dc714d
:END:
Sometimes running a serial of =jobs= (tasks) in /sequence/ takes a lot of times. That is when tool like =gnu-parallel= or =xargs= comes in handy
*** OUTL GNU-parallel vs xargs
** OUTL Chroot from live USB
/How to chroot from live USB stick/
** OUTL Arch Linux hibernation
:PROPERTIES:
:ID: b827e129-f7ca-4f65-8043-460afe696107
:END:
- Note taken on [2025-01-06 Mon 01:48] \\
  Hibernation for btrfs partitions
  
- *Goal(s):* setup ~hibernation~ for archlinux
- *Source(s):* [[https://wiki.archlinux.org/title/Power_management/Suspend_and_hibernate#Hibernation][hibernation@archwiki]]
** OUTL Notification Forwarding :NOTIFICATION:
/How to forward notification between machines/
- *Visit:* [[https://nikhilism.com/post/2023/remote-dbus-notifications/][Remote Dbus Notification @Blog]]
- *Goes-to:* [[id:0de1c55e-bc14-4f3c-b268-36ad6974f706][Archlinux System Tweaks @Org]]
** OUTL Run Service on Network Change :INTERNET:
:PROPERTIES:
:ID: b6113f7d-9ec6-49df-80ff-2c0d7546475f
:END:
/How to run script on network change/ \\
/*Check-out:*/ [[https://unix.stackexchange.com/a/725928][Restart Service on Wifi Change @Overflow]]
** OUTL Systemd power supply detection :SYSTEMD:
- *OBJECTIVE:* Adding power supply detection to systemd via udev rules
- *Reference:* [[https://chrisdown.name/2017/10/29/adding-power-related-targets-to-systemd.html][adding power related targets to systemd]]
** OUTL Advanced Suspend Mode :PERFORMANCE:
/Config advanced suspend mode on =archlinux= to optimize sleep time and power usage/ \\
/Check-out:/ [[https://wiki.archlinux.org/title/Power_management/Suspend_and_hibernate#High_level_interface_(systemd)][Power Management @Archlinux]]
*** Suspend Mode on Event
*Login Events:* \\
- There are several listed login =events= .e.g., =LidSwitch=, =LidSwitchExternalPower=, =LidSwitchDocked=
- Visit =manpage= for more =login-events=:
  #+BEGIN_SRC sh
  man 5 login.conf.d
  #+END_SRC
  + =hybrid-sleep= on =LidSwtich=, edit:
    #+NAME:/etc/systemd/logind.conf
    #+BEGIN_SRC conf
    [Login]
    HandleLidSwitch=hybrid-sleep
    #+END_SRC
*** Suspend-then-hibernate
To change =timeout= of =hibernation= when suspending
** OUTL Podman Quadlet :PODMAN:containerization:
/What is =podman= and =quadlet= and how they are used to with =systemd=/
/Check-out:/ [[https://linuxconfig.org/how-to-run-podman-containers-under-systemd-with-quadlet][How to run podman container using quadlet @Blog]]
** OUTL Switching to Wayland Guide :WAYLAND:GUIDE:
:PROPERTIES:
:ID: d398a743-eedb-4300-84e8-beab397e4b49
:END:
/Moving from =x11= to =wayland= guide/
*** Managing Input Devices in Wayland
/Check-out:/ [[id:345b5c3b-efd6-4434-bbda-f4a94f546806][Disable Devices on Wayland @Org]]
/Reference:/ [[https://gitlab.com/S410/noinputs][noinput @Gitlab]]
*** Wayland Clipboard Manager
/Enable =clipboard= manager on =wayland=/
** OUTL Archlinux Security :ARCHLINUX:Security:
/How to make archlinux =desktop= and =server= more secure/
/Reference:/ [[https://www.youtube.com/watch?v=QxNsyrftJ8I][Security mistakes on linux @Youtube]]
*** OUTL Firewall on Archlinux :firewall:
:PROPERTIES:
:ID: ab23a38d-229b-409a-be17-0153ded1a354
:END:
#+NAME:Archlinux firewall
#+BEGIN_QUOTE markdown
[!NOTE]
Arch Linux comes with two options for managing a firewall, neither of which is enabled automatically. The Stock linux =kernel= includes the =netfilter= packet filtering framework which can be managed by either of the following
- =nftable= is the modern linux kernel packet classification framework. Configuration maybe managed directly through the user space utilities which featured parity performance benefits over iptables
- =iptables= is the legacy user space utility for managing firewall .Configuration me be managed directly through the user space utilities or by installing one of the several GUI configuration tools
#+END_QUOTE

#+NAME:nftables front-end
#+BEGIN_QUOTE markdown
[!TIP]
Most =iptables= front-ends feature no direct or indirect support of =nftables=, but may introduce it. One graphical front-end that supports both, =nftables= and =iptables=, is =firewalld= ... =ufw= is supported via a compatibility layer =iptables-nft=.
#+END_QUOTE
/config firewall on archlinux =client= and =server=/
/Goto:/ [[id:6ab8f5dd-cb7f-4ede-90e3-340881274a20][Archlinux System Tweaks @Org]]
**** DONE Firewall on Archlinux Desktop
CLOSED: [2026-01-14 Wed 22:38]
- Install =ufw= run: =pacman -S ufw= /for archlinux/
- Config =ufw= rules:
  + Recommendation Rules:
    #+BEGIN_SRC sh
    ufw limit ssh
    ufw allow 80/tcp
    ufw allow 443/tcp
    ufw default deny incoming
    ufw default allow outgoing
    ufw enable
    #+END_SRC
**** OUTL Firewall on Archlinux Server
/Config firewall rules for archlinux server/
*** Server Safe-Guard :FAIL2BAN:Safeguarding:
:PROPERTIES:
:ID: c57c1c13-93a2-49a2-b530-609b4f75cb0f
:END:
#+BEGIN_QUOTE
Fail2ban is an open-source software tool that protects against automated malicious activities like /brute-force/ server attacks \\

It is lightweight on resources, so it doesn't burden the server that extra loads - critical for server with high handling and interacting
#+END_QUOTE

[[file:https://linuxiac.com/wp-content/uploads/2023/10/how-fail2ban-works2.jpg]]

Reference:  [[https://github.com/fail2ban/fail2ban][Fail2ban @Github]]
**** Fail2ban Installation
To install =fail2ban= on archlinux run:
#+BEGIN_SRC sh
pacman -S fail2ban # or paru for git version
#+END_SRC
**** Configuring Fail2ban for SSH :SSH:
Once installed the configuration file is located at [[file:/etc/fail2ban/jail.conf]] \\

However the best practice is to config in a =.local= file /- to avoid merging problem when upgrading/
1.  Create a =jail.local= at the same directory [[file:/etc/fail2ban/jail.local]]
2.  Config the file:
    #+NAME:Example
    #+BEGIN_SRC confini
    [sshd]

    enabled = true
    port    = ssh
    backend = systemd
    maxretry = 3
    findtime = 300
    bantime = 3600
    ignoreip = 127.0.0.1
    #+END_SRC
3.  Start =fail2ban= systemd service:
    #+BEGIN_SRC sh
    systemctl start fail2ban # or enable to start by default
    #+END_SRC
** OUTL Homelab Remote Access Via VPN :VPN:WIREGUARD:
DEADLINE: <2026-01-18 Sun>
:PROPERTIES:
:ID: 4a0867d1-313e-4131-82f8-d1ebe07a1814
:END:
/Learn how to tunneling traffic back to homelab via VPN/ \\
Reference:  [[https://www.wireguard.com/quickstart/][Wireguard quick-start @Blog]]
