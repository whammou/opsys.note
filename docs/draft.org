#+TITLE: System Document Drafts

#+TODO: TODO(t) (e) DOIN(d) PEND(p) OUTL(o) EXPL(x) FDBK(b) WAIT(w) NEXT(n) IDEA(i) | ABRT(a) PRTL(r) RVIW(v) DONE(f)
#+OPTIONS: title:nil tags:nil todo:nil ^:nil f:t num:t pri:nil toc:t
#+LATEX_HEADER: \renewcommand\maketitle{} \usepackage[scaled]{helvet} \renewcommand\familydefault{\sfdefault}
#+FILETAGS: :DOC:DRAFT:OPSYS:
#+HTML:<details>

* Document Drafts :DOC:DRAFT:OPSYS:META:
#+HTML:</details>

#+NAME:Warning Message
#+BEGIN_QUOTE
[!WARNING]
Draft items are subjected to change and refile!
#+END_QUOTE
** OUTL CPU and IRQ scheduler :PERFORMANCE:
- /Setup CPU and IRQ scheduler/ ~daemon~
*** OUTL Optimizing CPU Performance :cpu-performance:
/Optimize battery and performance usage on archlinux/
**** TLP Battery Suite :TLP:
=Tlp= is a feature-rich battery optimization suite for Linux. Saving laptop battery power without the need to delve deeper into technical details \\
/Reference:/  [[https://linrunner.de/tlp/index.html][TLP Documentation @Blog]]
**** Automatic CPU Optimizer :ACF:
=Auto-cpufreq= is a utility tools to optimize CPU frequency base on load and power usage \\
/Reference:/  [[https://github.com/AdnanHodzic/auto-cpufreq][Auto-cpufreq upstream @Github]]
** OUTL Select io scheduler :PERFORMANCE:
- /Change/ ~udev~ /rules for io-scheduler/
** OUTL Disable Coredump :TWEAKS:
/Documentation of disabling systemd coredump/
** OUTL Running Tasks in Parallel
:PROPERTIES:
:ID:       2b964774-683a-4eaa-882d-a8f5e5dc714d
:END:
Sometimes running a serial of =jobs= (tasks) in /sequence/ takes a lot of times. That is when tool like =gnu-parallel= or =xargs= comes in handy
*** OUTL GNU-parallel vs xargs
** OUTL Chroot from live USB
/How to chroot from live USB stick/
** OUTL Arch Linux hibernation
:PROPERTIES:
:ID:       b827e129-f7ca-4f65-8043-460afe696107
:END:
- Note taken on [2025-01-06 Mon 01:48] \\
  Hibernation for btrfs partitions
  
- *Goal(s):* setup ~hibernation~ for archlinux
- *Source(s):* [[https://wiki.archlinux.org/title/Power_management/Suspend_and_hibernate#Hibernation][hibernation@archwiki]]
** OUTL Notification Forwarding :NOTIFICATION:
/How to forward notification between machines/
- *Visit:* [[https://nikhilism.com/post/2023/remote-dbus-notifications/][Remote Dbus Notification @Blog]]
- *Goes-to:* [[id:0de1c55e-bc14-4f3c-b268-36ad6974f706][Archlinux System Tweaks @Org]]
** OUTL Run Service on Network Change :INTERNET:
:PROPERTIES:
:ID:       b6113f7d-9ec6-49df-80ff-2c0d7546475f
:END:
/How to run script on network change/ \\
/*Check-out:*/ [[https://unix.stackexchange.com/a/725928][Restart Service on Wifi Change @Overflow]]
** OUTL Systemd power supply detection :SYSTEMD:
- *OBJECTIVE:* Adding power supply detection to systemd via udev rules
- *Reference:* [[https://chrisdown.name/2017/10/29/adding-power-related-targets-to-systemd.html][adding power related targets to systemd]]
** OUTL Advanced Suspend Mode :PERFORMANCE:
/Config advanced suspend mode on =archlinux= to optimize sleep time and power usage/ \\
/Check-out:/ [[https://wiki.archlinux.org/title/Power_management/Suspend_and_hibernate#High_level_interface_(systemd)][Power Management @Archlinux]]
*** Suspend Mode on Event
*Login Events:* \\
- There are several listed login =events= .e.g., =LidSwitch=, =LidSwitchExternalPower=, =LidSwitchDocked=
- Visit =manpage= for more =login-events=:
  #+BEGIN_SRC sh
  man 5 login.conf.d
  #+END_SRC
  + =hybrid-sleep= on =LidSwtich=, edit:
    #+NAME:/etc/systemd/logind.conf
    #+BEGIN_SRC conf
    [Login]
    HandleLidSwitch=hybrid-sleep
    #+END_SRC
*** Suspend-then-hibernate
To change =timeout= of =hibernation= when suspending
** OUTL Podman Quadlet :PODMAN:containerization:
/What is =podman= and =quadlet= and how they are used to with =systemd=/
/Check-out:/ [[https://linuxconfig.org/how-to-run-podman-containers-under-systemd-with-quadlet][How to run podman container using quadlet @Blog]]
** OUTL Switching to Wayland Guide :WAYLAND:GUIDE:
:PROPERTIES:
:ID:       d398a743-eedb-4300-84e8-beab397e4b49
:END:
/Moving from =x11= to =wayland= guide/
*** Managing Input Devices in Wayland
/Check-out:/ [[id:345b5c3b-efd6-4434-bbda-f4a94f546806][Disable Devices on Wayland @Org]]
/Reference:/ [[https://gitlab.com/S410/noinputs][noinput @Gitlab]]
*** Wayland Clipboard Manager
/Enable =clipboard= manager on =wayland=/
** OUTL Archlinux Security :ARCHLINUX:Security:
/How to make archlinux =desktop= and =server= more secure/
/Reference:/ [[https://www.youtube.com/watch?v=QxNsyrftJ8I][Security mistakes on linux @Youtube]]
*** OUTL Firewall on Archlinux :firewall:
:PROPERTIES:
:ID:       ab23a38d-229b-409a-be17-0153ded1a354
:END:
#+NAME:Archlinux firewall
#+BEGIN_QUOTE markdown
[!NOTE]
Arch Linux comes with two options for managing a firewall, neither of which is enabled automatically. The Stock linux =kernel= includes the =netfilter= packet filtering framework which can be managed by either of the following
- =nftable= is the modern linux kernel packet classification framework. Configuration maybe managed directly through the user space utilities which featured parity performance benefits over iptables
- =iptables= is the legacy user space utility for managing firewall .Configuration me be managed directly through the user space utilities or by installing one of the several GUI configuration tools
#+END_QUOTE

#+NAME:nftables front-end
#+BEGIN_QUOTE markdown
[!TIP]
Most =iptables= front-ends feature no direct or indirect support of =nftables=, but may introduce it. One graphical front-end that supports both, =nftables= and =iptables=, is =firewalld= ... =ufw= is supported via a compatibility layer =iptables-nft=.
#+END_QUOTE
/config firewall on archlinux =client= and =server=/
/Goto:/ [[id:6ab8f5dd-cb7f-4ede-90e3-340881274a20][Archlinux System Tweaks @Org]]
**** DONE Firewall on Archlinux Desktop
CLOSED: [2026-01-14 Wed 22:38]
- Install =ufw= run: =pacman -S ufw= /for archlinux/
- Config =ufw= rules:
  + Recommendation Rules:
    #+BEGIN_SRC sh
    ufw limit ssh
    ufw allow 80/tcp
    ufw allow 443/tcp
    ufw default deny incoming
    ufw default allow outgoing
    ufw enable
    #+END_SRC
**** OUTL Firewall on Archlinux Server
/Config firewall rules for archlinux server/
*** Server Safe-Guard :FAIL2BAN:Safeguarding:
:PROPERTIES:
:ID:       c57c1c13-93a2-49a2-b530-609b4f75cb0f
:END:
#+BEGIN_QUOTE
Fail2ban is an open-source software tool that protects against automated malicious activities like /brute-force/ server attacks \\

It is lightweight on resources, so it doesn't burden the server that extra loads - critical for server with high handling and interacting
#+END_QUOTE

[[file:https://linuxiac.com/wp-content/uploads/2023/10/how-fail2ban-works2.jpg]]

Reference:  [[https://github.com/fail2ban/fail2ban][Fail2ban @Github]]
**** Fail2ban Installation
To install =fail2ban= on archlinux run:
#+BEGIN_SRC sh
pacman -S fail2ban # or paru for git version
#+END_SRC
**** Configuring Fail2ban for SSH :SSH:
Once installed the configuration file is located at [[file:/etc/fail2ban/jail.conf]] \\

However the best practice is to config in a =.local= file /- to avoid merging problem when upgrading/
1.  Create a =jail.local= at the same directory [[file:/etc/fail2ban/jail.local]]
2.  Config the file:
    #+NAME:Example
    #+BEGIN_SRC confini
    [sshd]

    enabled = true
    port    = ssh
    backend = systemd
    maxretry = 3
    findtime = 300
    bantime = 3600
    ignoreip = 127.0.0.1
    #+END_SRC
3.  Start =fail2ban= systemd service:
    #+BEGIN_SRC sh
    systemctl start fail2ban # or enable to start by default
    #+END_SRC
** DOIN Homelab Remote Access Via VPN :VPN:WIREGUARD:HOMELAB:
DEADLINE: <2026-02-07 Sat>
:PROPERTIES:
:ID:       4a0867d1-313e-4131-82f8-d1ebe07a1814
:END:
/Learn how to tunneling traffic back to homelab via VPN/ \\
Reference:  [[https://www.wireguard.com/quickstart/][Wireguard quick-start @Blog]]
*** DONE VPN protocols :VpnProtocol:
CLOSED: [2026-01-21 Wed 20:27]
Types of VPN protocols include:
-  Internet Protocol Security /(IPSec)/
-  Secure Socket Tunneling Protocol /(SSTP)/
-  WireGuard
-  OpenVPN
-  SoftEther
-  Point-Point Tunneling Protocol /(PPTP)/
-  Layer 2 Tunneling Protocol /(L2TP)/
/Reference:/  [[https://www.paloaltonetworks.com/cyberpedia/types-of-vpn-protocols][Types of VPN protocols @Blog]]
**** Internet Protocol Security (IPSec) :ipsec:
[[file:https://www.paloaltonetworks.com/content/dam/pan/en_US/images/cyberpedia/IPsec-v1.png]]

#+BEGIN_QUOTE
Internet Protocol Security (IPSec) is a set of protocols that supports secure communication over Internet Protocol (IP) networks through authentication and encryption. Its primary purpose is to ensure date integrity, data confidentiality, and data origin authentication between two communication parties
#+END_QUOTE

-  =ipsec= operates by encrypting and authenticating all IP packet transfers
-  =ipsec= is widely implemented in the formation of secure tunnels, especially for VPNs
-  =ipsecs= advantages include its high security and versatility across different network layer protocols
**** Secure Socket Tunneling Protocol (SSTP) :sstp:
[[file:https://www.paloaltonetworks.com/content/dam/pan/en_US/images/cyberpedia/SSTP-v1.png]]

#+BEGIN_QUOTE
Secure Socket Tunneling Protocol (SSTP) is a VPN communication protocol developed to provide secure, encrypted connections over a network. SSTP uses SSL/TLS encryption, which is the same technology that underpins secure internet connections. SSL/TLS encryption ensures the privacy and cecurity of data as it travel across the internet
#+END_QUOTE

-  =SSTP=  works by channeling VPN traffic through the SSL 3.0 channel. This means it can benefit from features like SSL's integrated connection integrity and encryption capabilities
-  =SSTP= is commonly used in scenarios where other VPN protocols might be blocked
-  =SSTP= benefits include its high level of security, strong encryption methods, and the protocol's ability to traverse firewalls
**** WireGuard :wireguard:
[[file:https://www.paloaltonetworks.com/content/dam/pan/en_US/images/cyberpedia/WireGuard-v1.png]]

#+BEGIN_QUOTE
WireGuard is a cutting-edge VPN protocol known for its simplicity and high-speed performace. WireGuard is designed to much simpler and faster than legacy protocols, using state of the art cryptographic techniqures. As an open-source project. WireGuard's streamlined approach results in better effiency and ease of use.
#+END_QUOTE

-  =wireguard= functioning through a unique mechanism crypto key routing
   +  Establishes secure VPN connections with remarkable speed and agility
   +  Assigning static IP addresses to VPN clients and managing traffic through cryptographic keys
   +  This approach simplifies the setup process, reduces latency and increase the protocol's performance over traditional VPN protocols
-  WireGuard is beneficial for businesses with mobile workforce or requirements for fast, reliable connections for cloud service
-  Drawbacks includes static IP address assignment can raise privacy concerns as it could potentially user activity. =wireguard= is still undergoing development, which means it may lack the extensive testing and wide-scale trust established older protocols
**** OpenVPN :openvpn:
[[file:https://www.paloaltonetworks.com/content/dam/pan/en_US/images/cyberpedia/openvpn.png]]

#+BEGIN_QUOTE
OpenVPN is a robust, secure VPN protocol favored in the enteprise environment for its strong encryption and configurability. This protocol works by creating secure point-to-point or site-to-site connections is routed or bridged configurations. OpenVPN uses custom security protocols that ultilize SSL/TLS for key exchange
#+END_QUOTE

-  =OpenVPN= operated by encapsulating data SSL/TLS encrypted packets, which are then transmitted over the network. This protocol can run over
   +  =TCP= (Transmission Control Protocol)
   +  =UDP= (User Datagram Protocol)
-  Businesses use =openvpn= for its adaptability to various network types and ability to establish a secure, reliable connection over intranet and internet
-  =OpenVPN= advantages include its strong security profile, open-source nature (which allows for peer review and audits)
**** SoftEther :softether:
[[https://www.paloaltonetworks.com/content/dam/pan/en_US/images/cyberpedia/SoftEther-v1.png]]

#+BEGIN_QUOTE
SoftEther (Soft Ethernet), is a versatile VPN protocol for performance and interoperavility, Softether is an open-source multiprotocl VPN software that supports SSLVPN, L2TP/IPSec, OpenVPN, and SSTP, all within a single VPN server
#+END_QUOTE

-  The protocol operates by establishing secure client-server communication through SSL-VPN Tunnneling on HTTPS. Softether by passes firewall and NATs, making it highly effective for users within restricted network environment
-  Works well in various scenarios, including individual remote access, corporate networks, and connecting multiple on-premises site securely
-  Stands out for strong encryption, resistance to network restrictions, and support for various operating system
**** Point-to-Point Tunneling Protocol :PPTP:
[[file:https://www.paloaltonetworks.com/content/dam/pan/en_US/images/cyberpedia/PPTP-v1.png]]

#+BEGIN_QUOTE
Developed by microsoft, point-to-point tunnneling protocol is on of the oldest VPN protocols, PPTP facilitaes secure data transmission by creating a tunnel for point-to-pont communication. The protocol encapsulates data packets within an IP evenlop, allowing them to sent across a network
#+END_QUOTE

-  Works by using a control channel over TCP and GRE tunnel operating to encapsulate PPP packets
-  The primary use case for =PPTP= is scenarios where legacy support id required, or speed is more critical than security /- PPTP is not recommended for transmitting confidential enterprise data because of its known security vulnerabilities/
-  Pros include speed and ease of setup
**** Layer 2 Tunneling Protocol
[[file:https://www.paloaltonetworks.com/content/dam/pan/en_US/images/cyberpedia/what-is-l2tp/l2tp-networking.png]]

#+BEGIN_QUOTE org
Layer e Tunnelling Protocol (L2TP) is a tunneling protocol. It does not provide encryption or confidentiality by itself. L2TP relies on an encryption protocol that it passes within the tunnel to provide privacy. =L2TP= is often paired with =IPSec=, which is reponsible for encryption and secure transport of data between endpoints
#+END_QUOTE

-  Works by encapsulating data packets within =L2TP= frames that are sent over the internet. When combined with =IPSec=, data packets are encrypted and authenticated, providing a secure conduit for transmitting sensitive information
-  Typical use cases for =L2TP= include connecting branch offices to a central corporate network, access, and enhancing security for date transmission over the internet
-  Benefits include compatibility and ability to work across multiple devices, =L2TP= has several disadvantages, including potential speed bottlenecks /(causes by double encapsulation)/ and difficulties traversing firewalls compared to protocols that uses stealth techniques
*** Subnetting :NETWORK:subnet:
**** DONE Subnet Mask :NETWORK:subnet:netmask:
CLOSED: [2026-01-23 Fri 00:47]
#+BEGIN_QUOTE org
A =network-mask=, often refers as a =subnet-mask=, is a 32-bit number that distinguishes the network address from the host address within an IP address. It works in conjunction with an IP address to define the boundaries of a network
#+END_QUOTE

[[file:https://cf-assets.www.cloudflare.com/slt3lc6tev37/2pBqIHUTSlxI7EW9XZPKf3/551ab3390ab9ab86fee15c73fd245f6c/subnet-diagram.svg]]

1.  *Purpose:* the primary purpose of a =network-mask= if to divide an IP address into two parts
    -   *Network Portion:* Identifies the specific network to which the device belongs. All devices on the same local network share the same network portion of their IP
    -   *Host Portion:* Identifies the specific device within that network. Each device on a network must have a unique portion

2.  *How it works (Binary Logic):*
    -   A network mas consists of a series of =ones= followed by a series of =zeroes=
    -   When you perform a bitwise =AND= Operation between an =IP-address= and its corresponding =network-mask=, the result is the =network-address=
    -   The bits in the IP-address that correspond to a =1= in the network mask are part of the =network-address=
    -   The bits in the IP-address that correspond to a =0= in the network mask are part of the =host-address=

3.  *Relationship with CIDR suffix:*
    -   The =CIDR= suffix /(e.g., =24=)/ is a shorthand notion for the network mask. It directly tells how many leading bits in the network mask are =1s=
    -   =/24= means there are 24 leading =1s= in the network mask
    -   This translates to:
        +   =/8=  = =255.0.0.0=
        +   =/16= = =255.255.0.0=
        +   =/24= = =255.255.255.0=
        +   =/27= = =255.255.255.254=

#+name:LOGBOOK
#+html:<details><summary>LOGBOOK</summary>
:LOGBOOK:
- Note taken on [2026-01-23 Fri 00:18] \\
  *Example:* =192.168.0.1/24=
  -   IP address: =192.168.0.1=
  -   CIDR suffix: =/24=
  -   +Network Mask=: =255.255.255.0=
  -   *Binary Representation:*
      +   IP: =11000000.10101000.00000000.00000001=
      +   Mask: =11111111.11111111.11111111.00000000=
      +   (IP and Mask): =11000000.10101000.00000000.00000000=
  -   *Result:*
      +   Network address: =192.168.0.0=  /(The first 24 bits define the network)/
      +   Host Portion: =0.0.0.1=         /(The last 8 bits indentify the specific host within that network)/
  
:END:
#+html:</details>
*** OUTL Network Terminologies
-  Gateway Peer
** OUTL Screen-saver and Screen-lock :WAYLAND:MONITOR:
/Lock and turn off screen after X value/ \\
/Visit:/  [[id:42f1f2f3-7ced-4803-b2af-74714bc55dc1][Wayland Screen Timeout @Org]]
